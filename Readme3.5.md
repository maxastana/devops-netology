Задача 1

Узнайте о sparse (разряженных) файлах.

Ответ:

Ознакомился
_________________________________________________________________________________________________________________________________________________________________________________

Задача 2

Могут ли файлы, являющиеся жесткой ссылкой на один объект, иметь разные права доступа и владельца? Почему?

Ответ:

Не может, hardlink это ссылка на тот же файл и права будут одни и теже.
_________________________________________________________________________________________________________________________________________________________________________________

Задача 3

Сделайте vagrant destroy на имеющийся инстанс Ubuntu. Замените содержимое Vagrantfile следующим:

    Vagrant.configure("2") do |config|
      config.vm.box = "bento/ubuntu-20.04"
      config.vm.provider :virtualbox do |vb|
        lvm_experiments_disk0_path = "/tmp/lvm_experiments_disk0.vmdk"
        lvm_experiments_disk1_path = "/tmp/lvm_experiments_disk1.vmdk"
        vb.customize ['createmedium', '--filename', lvm_experiments_disk0_path, '--size', 2560]
        vb.customize ['createmedium', '--filename', lvm_experiments_disk1_path, '--size', 2560]
        vb.customize ['storageattach', :id, '--storagectl', 'SATA Controller', '--port', 1, '--device', 0, '--type', 'hdd', '--medium', lvm_experiments_disk0_path]
        vb.customize ['storageattach', :id, '--storagectl', 'SATA Controller', '--port', 2, '--device', 0, '--type', 'hdd', '--medium', lvm_experiments_disk1_path]
      end
    end

Данная конфигурация создаст новую виртуальную машину с двумя дополнительными неразмеченными дисками по 2.5 Гб.

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144740133-38a56851-fa10-4d7e-a18a-cb2caebcdcdb.png)

_________________________________________________________________________________________________________________________________________________________________________________
Задача 4
Используя fdisk, разбейте первый диск на 2 раздела: 2 Гб, оставшееся пространство.

Отвкт:

![image](https://user-images.githubusercontent.com/65549218/144755020-4b556cdb-b318-417b-803d-3c7b3c8c0e92.png)

________________________________________________________________________________________________________________________________________________________________________________
Задача 5

Используя sfdisk, перенесите данную таблицу разделов на второй диск.

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144755290-d81dfad3-b4d3-4aa4-a69d-685e522ab879.png)

________________________________________________________________________________________________________________________________________________________________________________
Задача 6, 7

Соберите mdadm RAID1 на паре разделов 2 Гб.
Соберите mdadm RAID0 на второй паре маленьких разделов.

Ответ: 

![image](https://user-images.githubusercontent.com/65549218/144755708-2467bea4-ddef-4938-82db-670c36747ea6.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 8,9

Создайте 2 независимых PV на получившихся md-устройствах.
Создайте общую volume-group на этих двух PV.

Ответ: 

![image](https://user-images.githubusercontent.com/65549218/144756198-8393985e-3212-4f36-a0c2-f6a9badb0be4.png)
________________________________________________________________________________________________________________________________________________________________________________

Задача 10

Создайте LV размером 100 Мб, указав его расположение на PV с RAID0.

Ответ: 

![image](https://user-images.githubusercontent.com/65549218/144756215-86259afe-c911-41cd-a2ec-9e8969cca41c.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 11

Создайте mkfs.ext4 ФС на получившемся LV.

Ответ: 

![image](https://user-images.githubusercontent.com/65549218/144756317-5f419460-d0e6-4fb7-b95f-cbdc063c68fc.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 12

Смонтируйте этот раздел в любую директорию, например, /tmp/new.

Ответ: 

![image](https://user-images.githubusercontent.com/65549218/144758500-e526fb13-649b-4d30-a589-7e788130b716.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 13

Поместите туда тестовый файл, например wget https://mirror.yandex.ru/ubuntu/ls-lR.gz -O /tmp/new/test.gz.

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144758652-aaa5e13d-5184-4139-a363-f8d83368b8b1.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 14

Прикрепите вывод lsblk.

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144758718-ea96a23a-aaea-4fdc-8e36-86ae846a5e90.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 15

Протестируйте целостность файла:

root@vagrant:~# gzip -t /tmp/new/test.gz
root@vagrant:~# echo $?
0

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144758865-505572e1-c395-4d34-9663-ea7b5cadc5b4.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 16

Используя pvmove, переместите содержимое PV с RAID0 на RAID1.

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144759417-a1d30a9c-a26a-46cc-950f-cf6dfc4e9249.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 17

Сделайте --fail на устройство в вашем RAID1 md.

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144759569-d1a36fc6-8662-446a-9680-e1493149889b.png)

![image](https://user-images.githubusercontent.com/65549218/144759610-04ee20aa-2999-4ddc-94da-aac422d6b4c2.png)

________________________________________________________________________________________________________________________________________________________________________________
Задача 18

Подтвердите выводом dmesg, что RAID1 работает в деградированном состоянии.

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144759679-03297426-673a-4f11-a5f8-e765e31c82d1.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 19

Протестируйте целостность файла, несмотря на "сбойный" диск он должен продолжать быть доступен:

root@vagrant:~# gzip -t /tmp/new/test.gz
root@vagrant:~# echo $?
0

Ответ:

![image](https://user-images.githubusercontent.com/65549218/144759747-31ba71f5-844c-46ac-a8e5-bb732f5390f8.png)

________________________________________________________________________________________________________________________________________________________________________________

Задача 20

Погасите тестовый хост, vagrant destroy.

Ответ:

Готово
________________________________________________________________________________________________________________________________________________________________________________
